{% extends "base.html" %}
{% block title %}Chat - {{ project.title }}{% endblock %}
{% block extra_head %}
<script src="{{ url_for('static', filename='js/chat.js') }}"></script>
{% endblock %}
{% block content %}
<div class="max-w-5xl mx-auto px-4 py-12">
    <div class="bg-white rounded-xl shadow-lg overflow-hidden" style="height: 600px; display: flex; flex-direction: column;">
        <div class="bg-indigo-600 text-white p-4">
            <h2 class="font-bold text-xl">{{ project.title }}</h2>
            <p class="text-indigo-100 text-sm">Chat with {{ other_user.full_name if other_user else 'Participant' }}</p>
        </div>
        
        <div id="messages-container" class="flex-1 overflow-y-auto p-4 bg-gray-50">
            <!-- Messages will be loaded here -->
        </div>
        
        <div id="typing-indicator" class="hidden px-4 py-2 text-sm text-gray-500 italic"></div>
        
        <div class="border-t p-4 bg-white">
            <div class="flex space-x-2">
                <input type="text" id="message-input" placeholder="Type your message..."
                       class="flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500">
                <button id="send-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700">
                    <i class="fas fa-paper-plane"></i> Send
                </button>
            </div>
        </div>
    </div>
</div>
<script>
// Initialize chat when page loads
document.addEventListener('DOMContentLoaded', function() {
    ChatClient.init({{ project.id }}, {{ current_user.id }});
});
</script>
{% endblock %}